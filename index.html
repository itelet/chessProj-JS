<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <script>

    // CHESS CLOCK
    // https://github.com/jrus/chessclock-9000
    // Modified it a bit, but the core is from this github page. Thanks to jrus & his friends.

    var initial_time = 10 * 60 * 5;
    var game = null;

    function createGame() {
      game = new Game(initial_time, 'player0clock', 'player1clock');
      game.resetClocks();
    }

    function formatTime(tenths) {
      var minutes = String(Math.floor(tenths / 600));
      var seconds = String(Math.floor(tenths / 10) % 60);
      if (seconds.length == 1) { seconds = '0' + seconds; }
      var decimal = String(tenths % 10);

      // if we have no minutes, include tenths of a second
      return (minutes != '0') ?
        (minutes + ':' + seconds) :
        (seconds + '.' + decimal);
    }

    function Player(clock_id, initial_time, game) {
      this.clock = document.getElementById(clock_id);
      this.initial_time = initial_time;
      this.time = this.initial_time;
      this.game = game;
      this.opponent = null;
    }
    Player.prototype.play = function () {
      var opponent = this.opponent;
      var game = this.game;
      if (!game.game_over) {
        clearTimeout(game.timer_loop);
        game.timer_loop = setInterval(function () {
          opponent.time -= 1;
          if (opponent.time == 0) { // GAME OVER
            clearTimeout(game.timer_loop);
            game.game_over = true;
          }
          game.displayTimers();
        }, 100);
      }
    }

    function Game(initial_time, p1_clock_id, p2_clock_id) { // info id if required
      this.player1 = new Player(p1_clock_id, initial_time, this);
      this.player2 = new Player(p2_clock_id, initial_time, this);
      this.player1.opponent = this.player2;
      this.player2.opponent = this.player1;
      this.timer_loop = null;
      this.game_over = false;
    }
    // Dispatcher when we press a key
    Game.prototype.keypress = function (e) {
      var key = e.charCode || e.keyCode || 0;
      var keychar = String.fromCharCode(key);
      if (e == "White") {
        this.player1.play();
      }
      else if (e == "Black") {
        this.player2.play();
      }
    }
    Game.prototype.pause = function () {
      if (!this.game_over) {
        clearTimeout(this.timer_loop);
        this.timer_loop = setInterval(function () {
        }, 500);
      }
    }
    // Show the timers
    Game.prototype.displayTimers = function () {
      this.player1.clock.innerHTML = formatTime(this.player1.time);
      this.player2.clock.innerHTML = formatTime(this.player2.time);
    }
    // Reset the clocks
    Game.prototype.resetClocks = function () {
      clearTimeout(this.timer_loop);
      this.player1.time = this.player1.initial_time;
      this.player2.time = this.player2.initial_time;
      this.game_over = false;
      this.displayTimers();
    }
  </script>
  <title>Chess</title>

  <style>
    .draggablecss {
      max-width: 100%;
      max-height: 100%;
      z-index: 10000;
    }

    .text-center {
      size: 5rem;
      color: black;
      text-shadow:
        -1px -1px 0 rgb(255, 255, 255),
        1px -1px 0 rgb(255, 255, 255),
        -1px 1px 0 rgb(255, 255, 255),
        1px 1px 0 rgb(255, 255, 255);
    }

    tr {
      border: 2px solid black;
    }

    table {
      border: 2px solid black;
    }

    .spaces td {
      background-color: #666666;
      margin: 2px;
      width: 160px;
      height: 150px;
      border: 2px solid black;
    }
  </style>
</head>

<body onload="createGame()" style="background-color: grey;">

  <!-- Modal -->
  <div class="modal fade" id="gameendmodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel"></h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-footer w-100 text-center">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">3 min</button>
          <button type="button" class="btn btn-secondary" >5 min</button>
          <button type="button" class="btn btn-secondary" >10 min</button>
          <button type="button" class="btn btn-secondary" >15 min</button>
        </div>
      </div>
    </div>
  </div>
  <!-- MODAL END -->

  <div id="main" class="container">
    <table class="spaces">
      <div class="col" style="background-color: black;">
        <h2 style="color:white">
          White's time: <span id="player0clock">Move a piece to start the timer!</span>
        </h2>
      </div>
      <div class="col" style="background-color: white;">
        <h2 style="color:black">
          Black's time: <span id="player1clock"></span>
        </h2>
      </div>
      <tr>
        <td class="drop">
          <img src="chessSrc/blackRook.png" class="draggablecss" draggable="true" title="211">
        </td>
        <td class="drop">
          <img src="chessSrc/blackKnight.png" class="draggablecss" draggable="true" title="311">
        </td>
        <td class="drop">
          <img src="chessSrc/blackBishop.png" class="draggablecss" draggable="true" title="411">
        </td>
        <td class="drop">
          <img src="chessSrc/blackQueen.png" class="draggablecss" draggable="true" title="511">
        </td>
        <td class="drop">
          <img src="chessSrc/blackKing.png" class="draggablecss" draggable="true" title="611">
        </td>
        <td class="drop">
          <img src="chessSrc/blackBishop.png" class="draggablecss" draggable="true" title="412">
        </td>
        <td class="drop">
          <img src="chessSrc/blackKnight.png" class="draggablecss" draggable="true" title="312">
        </td>
        <td class="drop">
          <img src="chessSrc/blackRook.png" class="draggablecss" draggable="true" title="212">
        </td>
      </tr>
      <tr>
        <td class="drop">
          <img src="chessSrc/blackPawn.png" class="draggablecss" draggable="true" title="110">
        </td>
        <td class="drop">
          <img src="chessSrc/blackPawn.png" class="draggablecss" draggable="true" title="111">
        </td>
        <td class="drop">
          <img src="chessSrc/blackPawn.png" class="draggablecss" draggable="true" title="112">
        </td>
        <td class="drop">
          <img src="chessSrc/blackPawn.png" class="draggablecss" draggable="true" title="113">
        </td>
        <td class="drop">
          <img src="chessSrc/blackPawn.png" class="draggablecss" draggable="true" title="114">
        </td>
        <td class="drop">
          <img src="chessSrc/blackPawn.png" class="draggablecss" draggable="true" title="115">
        </td>
        <td class="drop">
          <img src="chessSrc/blackPawn.png" class="draggablecss" draggable="true" title="116">
        </td>
        <td class="drop">
          <img src="chessSrc/blackPawn.png" class="draggablecss" draggable="true" title="117">
        </td>
      </tr>
      <tr>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
      </tr>
      <tr>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
      </tr>
      <tr>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
      </tr>
      <tr>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
        <td class="drop"></td>
      </tr>
      <tr>
        <td class="drop">
          <img src="chessSrc/whitePawn.png" class="draggablecss" draggable="true" title="100">
        </td>
        <td class="drop">
          <img src="chessSrc/whitePawn.png" class="draggablecss" draggable="true" title="101">
        </td>
        <td class="drop">
          <img src="chessSrc/whitePawn.png" class="draggablecss" draggable="true" title="102">
        </td>
        <td class="drop">
          <img src="chessSrc/whitePawn.png" class="draggablecss" draggable="true" title="103">
        </td>
        <td class="drop">
          <img src="chessSrc/whitePawn.png" class="draggablecss" draggable="true" title="104">
        </td>
        <td class="drop">
          <img src="chessSrc/whitePawn.png" class="draggablecss" draggable="true" title="105">
        </td>
        <td class="drop">
          <img src="chessSrc/whitePawn.png" class="draggablecss" draggable="true" title="106">
        </td>
        <td class="drop">
          <img src="chessSrc/whitePawn.png" class="draggablecss" draggable="true" title="107">
        </td>
      </tr>
      <tr>
        <td class="drop">
          <img src="chessSrc/whiteRook.png" class="draggablecss" draggable="true" title="201">
        </td>
        <td class="drop">
          <img src="chessSrc/whiteKnight.png" class="draggablecss" draggable="true" title="301">
        </td>
        <td class="drop">
          <img src="chessSrc/whiteBishop.png" class="draggablecss" draggable="true" title="401">
        </td>
        <td class="drop">
          <img src="chessSrc/whiteQueen.png" class="draggablecss" draggable="true" title="501">
        </td>
        <td class="drop">
          <img src="chessSrc/whiteKing.png" class="draggablecss" draggable="true" title="601">
        </td>
        <td class="drop">
          <img src="chessSrc/whiteBishop.png" class="draggablecss" draggable="true" title="402">
        </td>
        <td class="drop">
          <img src="chessSrc/whiteKnight.png" class="draggablecss" draggable="true" title="302">
        </td>
        <td class="drop">
          <img src="chessSrc/whiteRook.png" class="draggablecss" draggable="true" title="202">
        </td>
      </tr>
    </table>
  </div>
  <script type="text/javascript">
    /*
    basically the idea is, to make a unique id for every piece on the board
    that way it'll be easy to track their location

    1 = Pawn
    2 = Rook
    3 = Knight
    4 = Bishop
    5 = Queen
    6 = King
    99 = empty

    White = 0
    Black = 1
    
    1-9

    this + (white || black) + 1-9

    PLAYER 0 == WHITE
    PLAYER 1 == BLACK

    */
    class Piece {
      constructor(x, y, wantedposx, wantedposy, piece, color, title) { // storing every bit of information that can be used up
        this.x = x; // current X position
        this.y = y; // current Y position
        this.wantedposx = wantedposx; // desired X position
        this.wantedposy = wantedposy; // desired Y position
        this.piece = piece; // name of the piece that's being moved
        this.color = color; // color of the piece that's being moved
        this.title = title; // title of the piece that's being moved
      }

      //
      // Moving the piece horizontally, only four possibility
      // Up, Down, Left or Right
      //

      HorizontalMove() {
        console.log("Horizontal");
        if (this.xright == 1) {
          for (let i = this.x + 1; i < this.wantedposx; i++) {
            if (arr[this.y][i] != 999) {
              return false;
            }
          }
        }
        else if (this.xleft == 1) {
          for (let i = this.x - 1; i > this.wantedposx; i--) {
            if (arr[this.y][i] != 999) {
              return false;
            }
          }
        }
        else if (this.ydown == 1) {
          for (let i = this.y + 1; i < this.wantedposy; i++) {
            if (arr[i][this.x] != 999) {
              return false;
            }
          }
        }
        else if (this.yup == 1) {
          for (let i = this.y - 1; i > this.wantedposy; i--) {
            if (arr[i][this.x] != 999) {
              return false;
            }
          }
        }
        else {
          return false;
        }
        return true;
      }

      //
      // Same as for Horizontal movement, only four possibility
      //

      DiagonalMove() {
        console.log("Diagonal");
        if (Math.abs(this.wantedposx - this.x) == Math.abs(this.wantedposy - this.y)) {
          console.log("Current Y: " + this.y + " Wanted Y: " + this.wantedposy);
          if (this.xright == 1 && this.yup == 1) {
            for (let i = this.y - 1, temp = this.x + 1; i > this.wantedposy; i--, temp++) {
              if (arr[i][temp] != 999) {
                return false;
              }
            }
          }
          else if (this.xright == 1 && this.ydown == 1) {
            for (let i = this.y + 1, temp = this.x + 1; i < this.wantedposy; i++, temp++) {
              if (arr[i][temp] != 999) {
                return false;
              }
            }
          }
          else if (this.xleft == 1 && this.ydown == 1) {
            for (let i = this.y + 1, temp = this.x - 1; i < this.wantedposy; i++, temp--) {
              if (arr[i][temp] != 999) {
                return false;
              }
            }
          }
          else if (this.xleft == 1 && this.yup == 1) {
            for (let i = this.y - 1, temp = this.x - 1; i > this.wantedposy; i--, temp--) {
              if (arr[i][temp] != 999) {
                return false;
              }
            }
          }
        }
        else {
          return false;
        }
        return true;
      }

      //
      // Tracking the path from the current, to the desired position.
      //

      CollisionDetect() {
        if (this.piece == "Pawn" && this.color == "Black") {
          for (let i = this.y + 1; i <= this.wantedposy; i++) {
            if (arr[i][this.x] != 999) {
              return false;
            }
          }
        }
        else if (this.piece == "Pawn" && this.color == "White") {
          for (let i = this.y - 1; i >= this.wantedposy; i--) {
            if (arr[i][this.x] != 999) {
              return false;
            }
          }
        }
        else if (this.piece == "Rook") {
          this.DirectionDetectHoriz();
          if (!this.HorizontalMove()) {
            return false;
          }
        }
        else if (this.piece == "Bishop") {
          this.DirectionDetectDiag();
          if (!this.DiagonalMove()) {
            return false;
          }
        }
        else if (this.piece == "Queen") {
          if (this.DirectionDetectHoriz()) {
            if (!this.HorizontalMove()) {
              return false;
            }
          }
          else if (this.DirectionDetectDiag()) {
            if (!this.DiagonalMove()) {
              return false;
            }
          }
        }
        else if (this.piece == "King") {
          if (this.DirectionDetectHoriz()) {
            if (!this.HorizontalMove()) {
              return false;
            }
          }
          else if (this.DirectionDetectDiag()) {
            if (!this.DiagonalMove()) {
              return false;
            }
          }
        }
        return true;
      }

      // Detecting Horizontal direction
      // x to the right
      // x to the left
      // y to up
      // y to down

      DirectionDetectHoriz() {

        this.xright = 0;
        this.xleft = 0;
        this.yup = 0;
        this.ydown = 0;

        if (this.piece == "Rook" || this.piece == "Queen" || this.piece == "King") {
          if (this.wantedposy - this.y < 0 && this.wantedposx - this.x == 0) {
            this.yup = 1;
            console.log("yup");
            return true;
          }
          if (this.wantedposy - this.y > 0 && this.wantedposx - this.x == 0) {
            this.ydown = 1;
            console.log("ydown");
            return true;
          }
          if (this.wantedposx - this.x > 0 && this.wantedposy - this.y == 0) {
            this.xright = 1;
            console.log("xright");
            return true;
          }
          if (this.wantedposx - this.x < 0 && this.wantedposy - this.y == 0) {
            this.xleft = 1;
            console.log("xleft");
            return true;
          }
        }
      }

      //
      // Same as above, just with Diagonal direction
      //

      DirectionDetectDiag() {

        this.xright = 0;
        this.xleft = 0;
        this.yup = 0;
        this.ydown = 0;

        if (this.piece == "Bishop" || this.piece == "Queen" || this.piece == "King") {
          if (this.wantedposy - this.y < 0) {
            this.yup = 1;
            console.log("yup");
          }
          if (this.wantedposy - this.y > 0) {
            this.ydown = 1;
            console.log("ydown");
          }
          if (this.wantedposx - this.x > 0) {
            this.xright = 1;
            console.log("xright");
          }
          if (this.wantedposx - this.x < 0) {
            this.xleft = 1;
            console.log("xleft");
          }
        }
        if (this.xright + this.yup + this.ydown + this.xleft >= 2)
          return true;
        else
          return false;
      }

      //
      // Updating the board, if possible is true then at the end an if statement catches it and visually moves the piece
      //

      MoveThePiece() {
        possible = true;
        arr[this.y][this.x] = 999;
        arr[this.wantedposy][this.wantedposx] = this.title;
      }

      //
      // Updating the board, and removing the piece visually
      //

      Capture() {
        for (var element of items) {
          if (element.title == arr[this.wantedposy][this.wantedposx]) {
            element.remove();
            this.captured = element.title;
            break;
          }
        }
        this.MoveThePiece();
      }

      IsItCapture() {
        if (arr[this.wantedposy][this.wantedposx] != 999 && arr[this.wantedposy][this.wantedposx].split('')[1] != this.title.split('')[1])
          return true;
        return false;
      }
    }

    //
    //  KNIGHT
    //

    class Knight extends Piece {
      KnightMove() {
        if (Math.abs(this.y - this.wantedposy) == 2 && Math.abs(this.x - this.wantedposx) == 1 ||
          Math.abs(this.y - this.wantedposy) == 1 && Math.abs(this.x - this.wantedposx) == 2)
          this.MoveThePiece();
      }
      KnightCapture() {
        if (Math.abs(this.y - this.wantedposy) == 2 && Math.abs(this.x - this.wantedposx) == 1 ||
          Math.abs(this.y - this.wantedposy) == 1 && Math.abs(this.x - this.wantedposx) == 2)
          this.Capture();
      }
    }

    //
    //  KING
    //
    //   Y  X
    //  -1,-1 | -1,0 | -1, +1
    //   0,-1 | KING |  0, +1
    //  +1,-1 | +1,0 | +1, +1

    class King extends Piece {
      KingMove() {
        if (this.CollisionDetect()) {
          if ((Math.abs(this.y - this.wantedposy) == 1 || Math.abs(this.y - this.wantedposy) == 0) && (Math.abs(this.x - this.wantedposx) == 1 || Math.abs(this.x - this.wantedposx) == 0))
            this.MoveThePiece();
        }
      }
      KingCapture() {
        if (this.CollisionDetect()) {
          if ((Math.abs(this.y - this.wantedposy) == 1 || Math.abs(this.y - this.wantedposy) == 0) && (Math.abs(this.x - this.wantedposx) == 1 || Math.abs(this.x - this.wantedposx) == 0))
            this.Capture();
        }
      }
    }

    //
    //  QUEEN
    //

    class Queen extends Piece {
      QueenMove() {
        if (this.CollisionDetect()) {
          this.MoveThePiece();
        }
      }
      QueenCapture() {
        if (this.CollisionDetect()) {
          this.Capture();
        }
      }
    }

    //
    //  BISHOP
    //

    class Bishop extends Piece {
      BishopMove() {
        if (this.CollisionDetect()) {
          this.MoveThePiece();
        }
      }
      BishopCapture() {
        if (this.CollisionDetect()) {
          this.Capture();
        }
      }
    }

    //
    //  ROOK
    //

    class Rook extends Piece {
      RookMove() {
        if (this.CollisionDetect()) {
          this.MoveThePiece();
        }
      }
      RookCapture() {
        if (this.CollisionDetect()) {
          this.Capture();
        }
      }
    }

    //
    //  PAWN
    //

    class Pawn extends Piece {
      PawnMove() {
        console.log(arr);
        if (this.CollisionDetect()) {
          if (this.color == "White") {
            if (this.y == 6) {
              //possible moves + 2 && +1 (first move)
              if ((this.y - this.wantedposy == 2 || this.y - this.wantedposy == 1) && Math.abs(this.wantedposx - this.x) == 0) {
                this.MoveThePiece();
              }
            }
            else {
              if (this.y - this.wantedposy == 1 && Math.abs(this.wantedposx - this.x) == 0) {
                this.MoveThePiece();
              }
            }
          } else {
            if (this.y == 1) {
              //possible moves - 2 && -1 (first move)
              if ((this.y - this.wantedposy == -2 || this.y - this.wantedposy == -1) && Math.abs(this.wantedposx - this.x) == 0) {
                this.MoveThePiece();
              }
            }
            else {
              //possible moves - 1
              if (this.y - this.wantedposy == -1 && Math.abs(this.wantedposx - this.x) == 0) {
                this.MoveThePiece();
              }
            }
          }
        }
      }
      PawnCapture() {
        if (Math.abs(this.x - this.wantedposx) + Math.abs(this.y - this.wantedposy) == 2) {
          this.Capture();
        }
      }
    }

    items = document.querySelectorAll('.draggablecss');
    drops = document.querySelectorAll('.drop');

    var itemcount = 0;
    var arr = Create2DArray(8);
    DataBind();

    let captured = 1;
    let wantedposx;
    let wantedposy;

    let turn = "White";

    let possible = false;
    let dragged = null;
    for (let i = 0; i < items.length; i++) {
      const item = items[i];
      item.addEventListener('dragstart', function (e) {
        draggedItem = item;
        setTimeout(function () {
          item.style.display = 'none';
        })
      });

      item.addEventListener('dragend', function () {
        setTimeout(function () {
          draggedItem.style.display = 'block';
          draggedItem = null;
        }, 0);
      });
      for (let j = 0; j < drops.length; j++) {
        const drop = drops[j];
        drop.addEventListener('dragover', function (e) {
          e.preventDefault();
        });
        drop.addEventListener('dragenter', function (e) {
          e.preventDefault();
        });
        drop.addEventListener('drop', function (e) { // listening to the drop of the element that's being dragged
          possible = false;
          for (let k = 0; k < arr.length; k++) {
            for (let u = 0; u < arr.length; u++) {
              if (arr[k][u] == draggedItem.title) {
                const chars = draggedItem.title.split('');
                const color = chars[1] == 0 ? "White" : "Black";
                if (color == turn) {
                  if (arr[Math.floor(j / 8)][Math.floor(j % 8)].toString().split('')[1] != arr[k][u].toString().split('')[1]) {
                    if (chars[0] == 1) {
                      p = new Pawn(u, k, Math.floor(j % 8), Math.floor(j / 8), "Pawn", color, draggedItem.title);
                      if (p.IsItCapture()) {
                        p.PawnCapture();
                        captured = p.captured;
                      }
                      else
                        p.PawnMove();
                    }
                    else if (chars[0] == 2) {
                      p = new Rook(u, k, Math.floor(j % 8), Math.floor(j / 8), "Rook", color, draggedItem.title);
                      if (p.IsItCapture()) {
                        p.RookCapture();
                        captured = p.captured;
                      }
                      else
                        p.RookMove();
                    }
                    else if (chars[0] == 3) {
                      p = new Knight(u, k, Math.floor(j % 8), Math.floor(j / 8), "Knight", color, draggedItem.title);
                      if (p.IsItCapture()) {
                        p.KnightCapture();
                        captured = p.captured;
                      }
                      else
                        p.KnightMove();
                    }
                    else if (chars[0] == 4) {
                      p = new Bishop(u, k, Math.floor(j % 8), Math.floor(j / 8), "Bishop", color, draggedItem.title);
                      if (p.IsItCapture()) {
                        p.BishopCapture();
                        captured = p.captured;
                      }
                      else
                        p.BishopMove();
                    }
                    else if (chars[0] == 5) {
                      p = new Queen(u, k, Math.floor(j % 8), Math.floor(j / 8), "Queen", color, draggedItem.title);
                      if (p.IsItCapture()) {
                        p.QueenCapture();
                        captured = p.captured;
                      }
                      else
                        p.QueenMove();
                    }
                    else if (chars[0] == 6) {
                      p = new King(u, k, Math.floor(j % 8), Math.floor(j / 8), "King", color, draggedItem.title);
                      if (p.IsItCapture()) {
                        p.KingCapture();
                        captured = p.captured;
                      }
                      else
                        p.KingMove();
                    }
                  }
                  if (possible == true) {
                    this.append(draggedItem);
                    if (turn == "Black") {
                      turn = "White";
                      game.keypress("Black");
                    }
                    else {
                      turn = "Black";
                      game.keypress("White");
                    }

                    if (captured == "601") { //black winning
                      $("#gameendmodal").modal({ show: true });
                      var modal = $("#gameendmodal");
                      modal.find('.modal-title').text('Congratulations to Black!');
                    }
                    else if (captured == "611") { //white winning
                      $("#gameendmodal").modal({ show: true });
                      var modal = $("#gameendmodal");
                      modal.find('.modal-title').text('Congratulations to White!');

                    }
                  }
                }
              }
            }
          }
        });
      }
    }


    // this is pretty bad, need to rethink, works for now tho

    function DataBind() {
      for (var i = 0; i < arr.length; i++) {
        arr[0][i] = items[itemcount].title;
        itemcount++;
      }
      for (var i = 0; i < arr.length; i++) {
        arr[1][i] = items[itemcount].title;
        itemcount++;
      }
      for (var i = 2; i < arr.length - 2; i++) {
        for (var j = 0; j < arr.length; j++) {
          arr[i][j] = 999;
        }
      }
      for (var i = 0; i < arr.length; i++) {
        arr[6][i] = items[itemcount].title;
        itemcount++;
      }
      for (var i = 0; i < arr.length; i++) {
        arr[7][i] = items[itemcount].title;
        itemcount++;
      }
    }
    function Create2DArray(rows) {
      var arr = [];
      for (var i = 0; i < rows; i++) {
        arr[i] = [];
      }
      return arr;
    }


  </script>
  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->

  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>
</body>


</html>